@import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@600;700&family=Plus+Jakarta+Sans:wght@300;400;500;600&display=swap');

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

/* ══════════════════════════════════════════
   TOAST
══════════════════════════════════════════ */
.toast {
  position: fixed; top: 22px; right: 22px; z-index: 99999;
  display: flex; align-items: center; gap: 10px;
  padding: 14px 22px; border-radius: 14px;
  background: #1A1612;
  color: #FFFFFF;
  font-family: 'Plus Jakarta Sans', sans-serif;
  font-size: 13px; font-weight: 600;
  box-shadow: 0 12px 40px rgba(0,0,0,.45);
  animation: toastIn .3s cubic-bezier(.16,1,.3,1);
  min-width: 240px; max-width: 400px;
}
.toast.toast-error { background: #8B3A3A; }
@keyframes toastIn {
  from { opacity: 0; transform: translateX(28px); }
  to   { opacity: 1; transform: translateX(0); }
}

/* ══════════════════════════════════════════
   SHELL
══════════════════════════════════════════ */
.app-shell {
  display: flex; min-height: 100vh;
  background: #F5F1EB;
  font-family: 'Plus Jakarta Sans', sans-serif;
}

/* ══════════════════════════════════════════
   SIDEBAR — fond sombre, texte blanc
══════════════════════════════════════════ */
.sidebar {
  width: 256px; flex-shrink: 0;
  background: #1A1612;
  display: flex; flex-direction: column;
  position: sticky; top: 0; height: 100vh;
  overflow-y: auto; overflow-x: hidden;
}

/* Brand */
.sb-brand {
  display: flex; align-items: center; gap: 12px;
  padding: 22px 20px 18px;
  border-bottom: 1px solid rgba(255,255,255,.07);
}
.sb-logo-mark {
  width: 38px; height: 38px; border-radius: 10px; flex-shrink: 0;
  background: #8B3A3A;
  display: flex; align-items: center; justify-content: center;
}
.sb-logo-mark span {
  font-family: 'Cormorant Garamond', serif;
  font-size: 18px; font-weight: 700; color: #FFFFFF;
}
.sb-brand-name { font-size: 13px; font-weight: 600; color: #FFFFFF; }
.sb-brand-role {
  font-size: 10px; color: rgba(255,255,255,.4);
  margin-top: 2px; text-transform: uppercase; letter-spacing: .05em;
}

/* Profile */
.sb-profile {
  display: flex; align-items: center; gap: 10px;
  padding: 14px 20px;
  border-bottom: 1px solid rgba(255,255,255,.06);
  position: relative;
}
.sb-av {
  width: 36px; height: 36px; border-radius: 50%; flex-shrink: 0;
  background: #8B3A3A;
  display: flex; align-items: center; justify-content: center;
  font-size: 12px; font-weight: 700; color: #FFFFFF;
}
.sb-pname { font-size: 13px; font-weight: 600; color: #FFFFFF; }
.sb-prole { font-size: 10px; color: rgba(255,255,255,.4); margin-top: 1px; }
.sb-online-dot {
  width: 8px; height: 8px; border-radius: 50%;
  background: #52c41a;
  box-shadow: 0 0 8px rgba(82,196,26,.8);
  position: absolute; right: 20px; top: 50%; transform: translateY(-50%);
  border: 2px solid #1A1612;
}

/* Nav groups */
.sb-nav { flex: 1; padding: 10px 12px; display: flex; flex-direction: column; }
.sb-group { margin-bottom: 4px; }

/* ★ GROUP LABELS — visibles sur fond sombre */
.sb-group-label {
  display: block;
  font-size: 9px; font-weight: 700;
  letter-spacing: .12em; text-transform: uppercase;
  color: rgba(255,255,255,.35);
  padding: 14px 10px 5px;
}

/* Nav items */
.sb-item {
  display: flex; align-items: center; gap: 10px;
  width: 100%; padding: 9px 10px; border-radius: 8px;
  border: none; background: transparent; cursor: pointer;
  font-family: 'Plus Jakarta Sans', sans-serif; font-size: 13px;
  color: rgba(255,255,255,.55);
  font-weight: 400; text-align: left;
  transition: background .18s, color .18s;
}
.sb-item:hover { background: rgba(255,255,255,.08); color: #FFFFFF; }
.sb-item.sb-active {
  background: rgba(139,58,58,.28);
  color: #FFFFFF; font-weight: 600;
  border-left: 3px solid #8B3A3A; padding-left: 8px;
}
.sb-item-icon { display: flex; align-items: center; flex-shrink: 0; }
.sb-item-label { flex: 1; }
.sb-badge {
  background: #8B3A3A; color: #FFFFFF;
  font-size: 10px; font-weight: 700; padding: 2px 7px; border-radius: 10px;
}
.sb-badge-warn { background: #e67e22; }

/* Logout */
.sb-logout {
  display: flex; align-items: center; gap: 8px;
  margin: 8px 12px 16px; padding: 10px 12px;
  border: 1px solid rgba(255,255,255,.1); border-radius: 8px;
  background: transparent; cursor: pointer;
  font-family: 'Plus Jakarta Sans', sans-serif; font-size: 12px;
  color: rgba(255,255,255,.45); transition: all .2s;
}
.sb-logout:hover { color: #ff8a8a; border-color: rgba(255,100,100,.3); }

/* ══════════════════════════════════════════
   MAIN
══════════════════════════════════════════ */
.main-area { flex: 1; display: flex; flex-direction: column; min-width: 0; }

/* ══════════════════════════════════════════
   TOPBAR
══════════════════════════════════════════ */
.topbar {
  display: flex; align-items: center; justify-content: space-between;
  padding: 14px 32px;
  background: #FFFFFF;
  border-bottom: 1px solid #E8E3DB;
  position: sticky; top: 0; z-index: 10;
}
.topbar-crumb {
  font-size: 11px; color: #6B5F52;
  display: flex; align-items: center; gap: 5px; margin-bottom: 4px;
}
.topbar-crumb svg { opacity: .5; }
.topbar-crumb span { color: #1A1612; font-weight: 600; }
.topbar-title {
  font-family: 'Cormorant Garamond', serif;
  font-size: 28px; font-weight: 700; color: #1A1612; line-height: 1.1;
}
.topbar-right { display: flex; align-items: center; gap: 14px; }

/* ★ BOUTON CTA — texte BLANC sur fond SOMBRE */
.btn-cta {
  display: inline-flex; align-items: center; gap: 7px;
  padding: 10px 22px;
  background: #1A1612;
  color: #FFFFFF;
  border: none; border-radius: 50px;
  font-family: 'Plus Jakarta Sans', sans-serif; font-size: 13px; font-weight: 600;
  cursor: pointer; transition: all .2s; white-space: nowrap;
  box-shadow: 0 4px 16px rgba(26,22,18,.2);
}
.btn-cta:hover { background: #8B3A3A; transform: translateY(-1px); }

/* Avatar topbar — prénom seulement, PAS de doublon */
.topbar-avatar { display: flex; align-items: center; gap: 9px; }
.t-av {
  width: 34px; height: 34px; border-radius: 50%; flex-shrink: 0;
  background: #8B3A3A;
  display: flex; align-items: center; justify-content: center;
  font-size: 11px; font-weight: 700; color: #FFFFFF;
}
.t-name { font-size: 12px; font-weight: 600; color: #1A1612; display: block; }
.t-role { font-size: 10px; color: #6B5F52; display: block; }

/* ══════════════════════════════════════════
   PAGE
══════════════════════════════════════════ */
.page-content { padding: 28px 32px; flex: 1; animation: pgIn .25s ease; }
@keyframes pgIn { from{opacity:0;transform:translateY(6px)} to{opacity:1;transform:translateY(0)} }

/* ══════════════════════════════════════════
   KPI
══════════════════════════════════════════ */
.kpi-row { display: grid; grid-template-columns: repeat(4,1fr); gap: 16px; margin-bottom: 24px; }
.kpi {
  background: #FFFFFF; border-radius: 18px;
  border: 1px solid #E8E3DB;
  border-top: 3px solid var(--accent, #8B3A3A);
  padding: 22px; cursor: default;
  box-shadow: 0 2px 12px rgba(26,22,18,.05);
  transition: transform .2s, box-shadow .2s;
}
.kpi:hover { transform: translateY(-3px); box-shadow: 0 10px 28px rgba(26,22,18,.1); }
.kpi-top { display: flex; align-items: flex-start; justify-content: space-between; margin-bottom: 14px; }
.kpi-ico { width: 42px; height: 42px; border-radius: 12px; display: flex; align-items: center; justify-content: center; }
.kpi-delta { font-size: 11px; font-weight: 700; padding: 3px 9px; border-radius: 20px; }
.kpi-delta.up   { background: #e8f5e9; color: #2e7d32; }
.kpi-delta.warn { background: #fff3cd; color: #e67e22; }
.kpi-val   { font-family: 'Cormorant Garamond', serif; font-size: 46px; font-weight: 700; color: #1A1612; line-height: 1; margin-bottom: 4px; }
.kpi-label { font-size: 12px; color: #6B5F52; font-weight: 500; margin-bottom: 14px; }
.kpi-bar   { height: 4px; background: #E8E3DB; border-radius: 2px; overflow: hidden; }
.kpi-fill  { height: 100%; border-radius: 2px; transition: width .6s ease; }

/* ══════════════════════════════════════════
   CARD BLOCK
══════════════════════════════════════════ */
.card-block {
  background: #FFFFFF; border-radius: 18px;
  border: 1px solid #E8E3DB; margin-bottom: 20px; overflow: hidden;
  box-shadow: 0 2px 12px rgba(26,22,18,.05);
}
.cb-head {
  display: flex; align-items: center; justify-content: space-between;
  padding: 18px 24px; border-bottom: 1px solid #E8E3DB;
}
.cb-head-left { display: flex; align-items: center; gap: 10px; }
.cb-title { font-family: 'Cormorant Garamond', serif; font-size: 20px; font-weight: 700; color: #1A1612; }
.cb-badge { background: #8B3A3A; color: #FFFFFF; font-size: 11px; font-weight: 700; padding: 3px 10px; border-radius: 20px; }
.cb-count { font-size: 12px; color: #6B5F52; }
.cb-link  { background: none; border: none; cursor: pointer; color: #8B3A3A; font-size: 13px; font-weight: 600; font-family: 'Plus Jakarta Sans', sans-serif; }

/* Pending */
.pending-rows { padding: 4px 18px; }
.pending-item { display: flex; align-items: center; gap: 12px; padding: 13px 4px; border-bottom: 1px solid #E8E3DB; }
.pending-item:last-child { border-bottom: none; }
.pi-av   { width: 40px; height: 40px; border-radius: 50%; flex-shrink: 0; display: flex; align-items: center; justify-content: center; font-size: 13px; font-weight: 700; color: #FFFFFF; background: #4A7C7E; }
.pi-info { flex: 1; }
.pi-name  { font-size: 14px; font-weight: 600; color: #1A1612; }
.pi-email { font-size: 12px; color: #6B5F52; }
.pi-acts  { display: flex; gap: 8px; }
.pi-btn { display: flex; align-items: center; gap: 5px; padding: 7px 14px; border-radius: 8px; border: none; cursor: pointer; font-size: 12px; font-weight: 600; font-family: 'Plus Jakarta Sans', sans-serif; transition: all .15s; }
.pi-approve { background: #e8f5e9; color: #2e7d32; }
.pi-approve:hover { background: #c8e6c9; }
.pi-reject  { background: #fce4e4; color: #c0392b; }
.pi-reject:hover { background: #ffcdd2; }

/* Dash table */
.dash-table { width: 100%; border-collapse: collapse; font-size: 13px; }
.dash-table th { padding: 11px 20px; text-align: left; background: #fafaf7; font-size: 10px; font-weight: 700; letter-spacing: .07em; text-transform: uppercase; color: #6B5F52; border-bottom: 1px solid #E8E3DB; }
.dash-table td { padding: 13px 20px; border-bottom: 1px solid #E8E3DB; color: #1A1612; vertical-align: middle; }
.dash-table tr:last-child td { border-bottom: none; }
.dash-table tr:hover td { background: #fafaf7; }

/* ══════════════════════════════════════════
   MINI STATS
══════════════════════════════════════════ */
.mini-stats { display: flex; gap: 12px; margin-bottom: 18px; }
.ms-card { flex: 1; background: #FFFFFF; border: 1px solid #E8E3DB; border-radius: 14px; padding: 18px 20px; box-shadow: 0 1px 6px rgba(26,22,18,.04); }
.ms-num  { font-family: 'Cormorant Garamond', serif; font-size: 34px; font-weight: 700; color: #1A1612; display: block; }
.ms-lbl  { font-size: 11px; color: #6B5F52; display: block; margin-top: 3px; }

/* ══════════════════════════════════════════
   CONTROLS
══════════════════════════════════════════ */
.ctrl-row { display: flex; gap: 10px; margin-bottom: 14px; flex-wrap: wrap; align-items: center; }
.ctrl-search {
  flex: 1; min-width: 200px; max-width: 360px;
  display: flex; align-items: center; gap: 8px;
  background: #FFFFFF; border: 1.5px solid #E8E3DB;
  border-radius: 50px; padding: 9px 16px; transition: border-color .2s;
}
.ctrl-search:focus-within { border-color: #8B3A3A; }
.ctrl-search input { border: none; outline: none; font-size: 13px; color: #1A1612; flex: 1; background: transparent; font-family: 'Plus Jakarta Sans', sans-serif; }
.ctrl-sel { padding: 9px 16px; background: #FFFFFF; border: 1.5px solid #E8E3DB; border-radius: 50px; font-size: 13px; color: #1A1612; outline: none; font-family: 'Plus Jakarta Sans', sans-serif; cursor: pointer; }
.ctrl-export { display: flex; align-items: center; gap: 6px; padding: 9px 16px; background: #FFFFFF; border: 1.5px solid #E8E3DB; border-radius: 50px; font-size: 12px; font-weight: 600; color: #6B5F52; cursor: pointer; font-family: 'Plus Jakarta Sans', sans-serif; transition: all .15s; }
.ctrl-export:hover { border-color: #1A1612; color: #1A1612; }
.ctrl-export-pdf { border-color: #ffcdd2; color: #c0392b; background: #fce4e4; }
.ctrl-export-pdf:hover { background: #ffcdd2; }

/* ══════════════════════════════════════════
   TABLE
══════════════════════════════════════════ */
.table-wrap { background: #FFFFFF; border: 1px solid #E8E3DB; border-radius: 18px; overflow: hidden; box-shadow: 0 2px 12px rgba(26,22,18,.05); }
.users-table { width: 100%; border-collapse: collapse; font-size: 13px; }
.users-table th { padding: 13px 20px; text-align: left; background: #fafaf7; font-size: 10px; font-weight: 700; letter-spacing: .07em; text-transform: uppercase; color: #6B5F52; border-bottom: 1px solid #E8E3DB; }
.users-table td { padding: 14px 20px; border-bottom: 1px solid #E8E3DB; color: #1A1612; vertical-align: middle; }
.users-table tr:last-child td { border-bottom: none; }
.users-table tr:hover td { background: #fafaf7; }
.users-table tr.row-dim td { opacity: .55; }

.user-cell { display: flex; align-items: center; gap: 10px; }
.uc-av { width: 36px; height: 36px; border-radius: 50%; flex-shrink: 0; background: #8B3A3A; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 700; color: #FFFFFF; }
.uc-av.teal { background: #4A7C7E; }
.uc-av.dim  { opacity: .4; filter: grayscale(.5); }
.uc-name { font-size: 13px; font-weight: 600; color: #1A1612; }
.uc-date { font-size: 11px; color: #6B5F52; margin-top: 1px; }
.td-muted { color: #6B5F52 !important; }

.role-chip { display: inline-block; padding: 4px 12px; border-radius: 20px; font-size: 11px; font-weight: 700; }
.rc-apprenant { background: #f9f0f0; color: #8B3A3A; }
.rc-formateur { background: rgba(74,124,126,.12); color: #4A7C7E; }

.status-chip { display: inline-block; padding: 4px 12px; border-radius: 20px; font-size: 11px; font-weight: 700; }
.sc-active   { background: #e8f5e9; color: #2e7d32; }
.sc-pending  { background: #fff3cd; color: #e67e22; }
.sc-inactive { background: #fce4e4; color: #c0392b; }

.act-row { display: flex; gap: 5px; }
.act { width: 30px; height: 30px; border-radius: 8px; border: 1px solid #E8E3DB; background: #FFFFFF; display: flex; align-items: center; justify-content: center; cursor: pointer; color: #6B5F52; transition: all .15s; }
.act:hover { border-color: #1A1612; color: #1A1612; }
.act-off:hover { border-color: #c0392b; color: #c0392b; background: #fce4e4; }
.act-on:hover  { border-color: #2e7d32; color: #2e7d32; background: #e8f5e9; }
.act-approve   { border-color: #c8e6c9; color: #2e7d32; background: #e8f5e9; }
.act-approve:hover { background: #c8e6c9; }
.act-del:hover { border-color: #c0392b; color: #c0392b; background: #fce4e4; }

.empty-td { text-align: center; padding: 48px; color: #6B5F52; font-size: 14px; }
.loading-state { display: flex; align-items: center; justify-content: center; gap: 10px; padding: 48px; color: #6B5F52; }
.spinner { width: 18px; height: 18px; border-radius: 50%; border: 2px solid #E8E3DB; border-top-color: #8B3A3A; animation: spin .7s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }
.table-count { font-size: 12px; color: #6B5F52; text-align: right; padding: 10px 20px; border-top: 1px solid #E8E3DB; }

/* ══════════════════════════════════════════
   MODAL
══════════════════════════════════════════ */
.m-overlay {
  position: fixed; inset: 0;
  background: rgba(26,22,18,.65); backdrop-filter: blur(8px);
  display: flex; align-items: center; justify-content: center;
  z-index: 9999; padding: 20px; overflow-y: auto;
  animation: fadeIn .2s ease;
}
@keyframes fadeIn { from{opacity:0} to{opacity:1} }
.m-box {
  background: #FFFFFF; border-radius: 22px;
  width: 100%; max-width: 490px; max-height: 92vh; overflow-y: auto;
  box-shadow: 0 40px 100px rgba(26,22,18,.3);
  animation: popIn .3s cubic-bezier(.16,1,.3,1);
}
@keyframes popIn { from{transform:scale(.9) translateY(12px);opacity:0} to{transform:scale(1) translateY(0);opacity:1} }
.m-hd { display: flex; align-items: flex-start; justify-content: space-between; padding: 26px 28px 0; }
.m-title { font-family: 'Cormorant Garamond', serif; font-size: 24px; font-weight: 700; color: #1A1612; }
.m-sub   { font-size: 12px; color: #6B5F52; margin-top: 3px; }
.m-close { width: 32px; height: 32px; border-radius: 8px; border: 1px solid #E8E3DB; background: #FFFFFF; display: flex; align-items: center; justify-content: center; cursor: pointer; color: #6B5F52; transition: all .15s; flex-shrink: 0; }
.m-close:hover { background: #F5F1EB; color: #1A1612; }
.m-err { margin: 12px 28px 0; padding: 11px 14px; background: #fce4e4; border-radius: 10px; font-size: 13px; color: #c0392b; font-weight: 500; }
.m-bd { padding: 20px 28px; display: flex; flex-direction: column; gap: 14px; }
.m-two { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.m-field { display: flex; flex-direction: column; gap: 6px; }
.m-field label { font-size: 10px; font-weight: 700; color: #6B5F52; text-transform: uppercase; letter-spacing: .06em; }
.m-req { color: #8B3A3A; }
.m-in {
  padding: 11px 14px; background: #F5F1EB;
  border: 1.5px solid #E8E3DB; border-radius: 11px;
  font-size: 14px; color: #1A1612; outline: none;
  font-family: 'Plus Jakarta Sans', sans-serif; transition: all .2s; width: 100%;
}
.m-in:focus { border-color: #8B3A3A; background: #FFFFFF; }
.role-pick { display: flex; gap: 10px; }
.rp-opt {
  flex: 1; padding: 12px; border-radius: 11px; border: 2px solid #E8E3DB;
  background: #F5F1EB; font-size: 13px; font-weight: 500; color: #6B5F52;
  text-align: center; cursor: pointer; transition: all .18s;
  display: flex; align-items: center; justify-content: center; gap: 7px;
  font-family: 'Plus Jakarta Sans', sans-serif;
}
.rp-opt:hover { border-color: #8B3A3A; color: #8B3A3A; }
.rp-sel { border-color: #8B3A3A !important; background: #f9f0f0 !important; color: #8B3A3A !important; font-weight: 700 !important; }
.m-ft { display: flex; gap: 10px; padding: 0 28px 26px; margin-top: 4px; }
.m-cancel {
  flex: 1; padding: 13px; background: #F5F1EB;
  border: 1.5px solid #E8E3DB; border-radius: 50px;
  font-size: 13px; font-weight: 600; color: #6B5F52;
  cursor: pointer; font-family: 'Plus Jakarta Sans', sans-serif; transition: all .18s;
}
.m-cancel:hover { background: #E8E3DB; color: #1A1612; }

/* ★★★ BOUTON SAVE — fond sombre texte BLANC toujours visible ★★★ */
.m-save {
  flex: 2; padding: 13px;
  background: #1A1612;
  color: #FFFFFF;
  border: none; border-radius: 50px;
  font-size: 13px; font-weight: 600; cursor: pointer;
  font-family: 'Plus Jakarta Sans', sans-serif; transition: all .2s;
  display: flex; align-items: center; justify-content: center; gap: 8px;
  min-height: 48px;
}
.m-save:hover:not(:disabled) { background: #8B3A3A; transform: translateY(-1px); }
.m-save:disabled { opacity: .5; cursor: not-allowed; }

/* Responsive */
@media (max-width: 1200px) { .kpi-row { grid-template-columns: repeat(2,1fr); } }
@media (max-width: 900px) {
  .sidebar { display: none; }
  .page-content { padding: 16px 18px; }
  .topbar { padding: 12px 18px; }
  .mini-stats { flex-wrap: wrap; }
}